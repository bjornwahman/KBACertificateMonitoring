<?xml version="1.0" encoding="utf-8"?>
<ManagementPack ContentReadable="true" SchemaVersion="2.0">
  <Manifest>
    <Identity>
      <ID>Kungsbacka.Certificate.Discovery</ID>
      <Version>1.0.0.0</Version>
    </Identity>
    <Name>Kungsbacka Certificate Discovery</Name>
    <References>
      <Reference Alias="System">
        <ID>System.Library</ID>
        <Version>7.5.8501.0</Version>
        <PublicKeyToken>31bf3856ad364e35</PublicKeyToken>
      </Reference>
      <Reference Alias="Windows">
        <ID>Microsoft.Windows.Library</ID>
        <Version>7.5.8501.0</Version>
        <PublicKeyToken>31bf3856ad364e35</PublicKeyToken>
      </Reference>
      <Reference Alias="SC">
        <ID>Microsoft.SystemCenter.Library</ID>
        <Version>7.0.8437.0</Version>
        <PublicKeyToken>31bf3856ad364e35</PublicKeyToken>
      </Reference>
      <Reference Alias="CertLib">
        <ID>Kungsbacka.Certificate.Library</ID>
        <Version>1.0.0.0</Version>
        <PublicKeyToken>0000000000000000</PublicKeyToken>
      </Reference>
    </References>
  </Manifest>
  <Files>
    <File ID="DiscoverKBACertificateWatchers_ps1" Accessibility="Public" FileName="scripts\\Discover-KBACertificateWatchers.ps1" HasNullStream="false">
      <Contents>$IncludeFileContent/scripts/Discover-KBACertificateWatchers.ps1$</Contents>
    </File>
  </Files>
  <TypeDefinitions/>
  <Monitoring>
    <Discoveries>
      <Discovery ID="Kungsbacka.Certificate.CertificateWatcher.Discovery" Enabled="true" Target="SC!Microsoft.SystemCenter.ManagementServer" ConfirmDelivery="false" Remotable="true" Priority="Normal">
        <Category>Discovery</Category>
        <DiscoveryTypes>
          <DiscoveryClass TypeID="CertLib!Kungsbacka.Certificate.CertificateWatcher"/>
        </DiscoveryTypes>
        <DataSource ID="DS" TypeID="Windows!Microsoft.Windows.TimedPowerShell.DiscoveryProvider">
          <IntervalSeconds>86400</IntervalSeconds>
          <SyncTime>00:15</SyncTime>
          <ScriptName>Discover-KBACertificateWatchers.ps1</ScriptName>
          <ScriptBody>$FileContent/DiscoverKBACertificateWatchers_ps1$</ScriptBody>
          <TimeoutSeconds>300</TimeoutSeconds>
        </DataSource>
      </Discovery>
    </Discoveries>
  </Monitoring>
  <Presentation/>
  <LanguagePacks>
    <LanguagePack ID="SV" IsDefault="true">
      <DisplayStrings>
        <DisplayString ElementID="Kungsbacka.Certificate.Discovery">
          <Name>Kungsbacka Certificate Discovery</Name>
          <Description>Upptäcker certifikatsinstanser baserat på innehållet i CertificateWatchers.json.</Description>
        </DisplayString>
        <DisplayString ElementID="Kungsbacka.Certificate.CertificateWatcher.Discovery">
          <Name>Upptäck SSL-certifikat från JSON-konfiguration</Name>
          <Description>Skapar certifikatsinstanser enligt definitionerna i CertificateWatchers.json.</Description>
        </DisplayString>
      </DisplayStrings>
    </LanguagePack>
  </LanguagePacks>
</ManagementPack>

